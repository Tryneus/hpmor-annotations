function annotate(){let t=document.getElementById('hpmor-annotations-frame'),n=document.getElementById('hpmor-annotations-overlay');if(!t)console.error('hpmor-annotations: Could not find iframe.');else{let e=t.contentWindow.location.href,o=e.match(/\/([0-9]+)(\.html)?$/),r=o&&parseInt(o[1]),a=t.contentDocument.getElementById('storycontent');n?r?a?console.log('annotate',t,n,r):console.error('hpmor-annotations: Could not find story content.'):console.error('hpmor-annotations: Could not determine chapter.',e):console.error('hpmor-annotations: Could not find overlay.')}}function reload_script(){let t=Array.from(document.getElementsByTagName('script')).filter(t=>Boolean(t.src.match(/\/annotate.js$/)));if(t.length===0)console.error('Could not find script to reload.');else if(t.length>1)console.error('Found too many matching script elements.',t);else{let n=t[0],e=document.createElement('script');e.src=n.src.replace('dist','src');n.parentNode.removeChild(n);document.body.appendChild(e)}}